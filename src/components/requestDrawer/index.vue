<template>
  <div>
    <el-drawer title="ÂèëËµ∑Áî≥ËØ∑"
               :visible.sync="visible"
               size="60%"
               @close="handleClose">
      <el-form ref="dataForm"
               :rules="{}"
               :model="{}"
               label-position="left"
               label-width="120px"
               style="margin-left:20px;">

        <!-- Âü∫Êú¨‰ø°ÊÅØ -->
        <div class="dividerBox">
          <el-divider direction="vertical"></el-divider>
          <span>Âü∫Êú¨‰ø°ÊÅØ</span>
        </div>
        <!-- <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item :label="'È°πÁõÆÂêçÁß∞'"
                          prop="projectName">
              <el-input v-model="equipmentProcessData.projectName"
                        placeholder="ËØ∑ËæìÂÖ•" />
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item :label="'Ë¥≠ÁΩÆÁ±ªÂà´'"
                          prop="purchaseType">
              <el-select v-model="equipmentProcessData.purchaseType"
                         placeholder="ËØ∑ÈÄâÊã©">
                <el-option key="Êñ∞Â¢û"
                           label="Êñ∞Â¢û"
                           value="Êñ∞Â¢û">
                </el-option>
                <el-option key="Â§çË¥≠"
                           label="Â§çË¥≠"
                           value="Â§çË¥≠">
                </el-option>
              </el-select>
            </el-form-item>
          </el-col>
        </el-row>
        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item :label="'Áî≥ËØ∑ÁßëÂÆ§'"
                          prop="applyDept">
              <el-select v-model="equipmentProcessData.applyDept"
                         placeholder="ËØ∑ÈÄâÊã©"
                         @change="changeApplyDept">
                <el-option v-for="item in applyDeptData"
                           :key="item.id"
                           :label="item.title"
                           :value="item.id">
                </el-option>
              </el-select>
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item :label="'Áî≥ËØ∑ÊñπÂºè'"
                          prop="applyModle">
              <el-select v-model="equipmentProcessData.applyModle"
                         placeholder="ËØ∑ÈÄâÊã©">
                <el-option key="zcsq"
                           label="Ê≠£Â∏∏Áî≥ËØ∑"
                           value="zcsq">
                </el-option>
              </el-select>
            </el-form-item>
          </el-col>
        </el-row>
        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item :label="'Áî≥ËØ∑ÁêÜÁî±'"
                          prop="applyReson">
              <el-input v-model="equipmentProcessData.applyReson"
                        placeholder="ËØ∑ËæìÂÖ•" />
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item :label="'ÊµÅÁ®ãÊ∞ëÁß∞'"
                          prop="processCode">
              <el-input v-model="equipmentProcessData.processName"
                        placeholder="ËØ∑ËæìÂÖ•"
                        disabled />
            </el-form-item>
          </el-col>
        </el-row>
        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item :label="'ÂΩìÂâçËäÇÁÇπÂêçÁß∞'"
                          prop="currentNodeName">
              <el-input v-model="equipmentProcessData.currentNodeName"
                        placeholder="ËØ∑ËæìÂÖ•"
                        disabled />
            </el-form-item>
          </el-col>
          <el-col :span="12"></el-col>
        </el-row> -->

        <!-- ËÆæÂ§áÊòéÁªÜ -->
        <div class="dividerBox">
          <el-divider direction="vertical"></el-divider>
          <span>ËÆæÂ§áÊòéÁªÜ</span>
        </div>
        <!-- <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item :label="'Áî≥ËØ∑ËÆæÂ§áÊòéÁªÜ'"
                          prop="applyDetailId">
              <el-select v-model="equipmentProcessData.applyDetailId"
                         placeholder="ËØ∑ÈÄâÊã©">
                <el-option v-for="item in applyDetailData"
                           :key="item.id"
                           :label="item.name"
                           :value="item.id">
                </el-option>
              </el-select>
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item :label="'ÈôÑ‰ª∂'"
                          prop="enclosureId">
              <el-upload class="upload-demo"
                         action="https://jsonplaceholder.typicode.com/posts/"
                         :on-preview="handlePreview"
                         :on-remove="handleRemoveField"
                         :before-remove="beforeRemove"
                         multiple
                         :limit="3"
                         :on-exceed="handleExceed"
                         :file-list="fileList">
                <el-button size="small"
                           type="primary">ÁÇπÂáª‰∏ä‰º†</el-button>
              </el-upload>
            </el-form-item>
          </el-col>
        </el-row>
        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item :label="'‰∏ã‰∏ÄËäÇÁÇπÂêçÁß∞'"
                          prop="nextNodeName">
              <el-input v-model="equipmentProcessData.nextNodeName"
                        placeholder="ËØ∑ËæìÂÖ•"
                        disabled />
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item :label="'‰∏ã‰∏ÄËäÇÁÇπÊâßË°å‰∫∫ '"
                          prop="nextNodeExecutor">
              <el-select v-model="equipmentProcessData.nextNodeExecutor"
                         placeholder="ËØ∑ÈÄâÊã©">
                <el-option :label="item.user_name"
                           :value="item.user_id"
                           v-for="(item) in nextNodeExecutorData"
                           :key="item.user_id"></el-option>
              </el-select>
            </el-form-item>
          </el-col>
        </el-row> -->
      </el-form>
      <div class="demo-drawer__footer">
        <el-button @click="handleClose"
                   size="large">
          {{ $t('table.cancel') }}
        </el-button>
        <el-button type="primary"
                   size="large"
                   @click="createData()">
          {{ $t('table.confirm') }}
        </el-button>
      </div>

    </el-drawer>
  </div>
</template>

<script lang="ts">
import { Component, Vue, Watch, Prop, Emit } from 'vue-property-decorator'
@Component({
  name: 'RequestDrawer',
  components: {},
})
export default class extends Vue {
  @Prop() dialogVisible!: boolean
  private visible = false
  @Watch('dialogVisible')
  private onChangeVisible(value: boolean) {
    console.log('üöÄ ~ value', value)
    this.visible = value
  }
  @Prop({default:{}}) requestForm!: any
  @Watch('requestForm')

  @Prop({default:{}}) processModal!: any
  @Watch('processModal')
  // Êñ∞Â¢ûÊµÅÁ®ãÁî≥ËØ∑
  private createData() {
    // console.log("üöÄ ~ this.equipmentProcessData", this.equipmentProcessData);
    // (this.$refs.dataForm as Form).validate(async valid => {
    //   if (valid) {
    //     const res: any = await queryHospitalProcessBusinessSave({
    //       ...this.equipmentProcessData
    //     });
    //     if (res.result) {
    //       (this.$refs.vexTable as any).findList(this.paramsConfig);
    //     }
    //     this.dialogVisible = false;
    //     (this.$refs.dataForm as Form).resetFields();
    //     Message.success("ÂàõÂª∫ÊàêÂäü");
    //   }
    // });
  }

  @Emit()
  emitClose() {
    return true
  }
  private handleClose() {
    console.log(this.requestForm,this.processModal)
    this.emitClose()
  }
}
</script>