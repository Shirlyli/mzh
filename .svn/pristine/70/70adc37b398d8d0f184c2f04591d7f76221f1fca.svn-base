import { getTableDataList } from "@/api/equipment";
import { Component, Vue, Watch, Prop, Emit } from "vue-property-decorator";

@Component({
  name: "Content",
  components: {}
})
export default class extends Vue {
  @Prop() paramsConfig!: any;
  @Watch("paramsConfig", { immediate: true, deep: true })
  private onParamsConfigChange(newData: any) {
    this.findList(newData);
  }

  private loading = false;
  private personalData = []; //获取到的员工数据
  private clickPersonalData = {}; //当前点击的员工数据
  created() {
    this.findList(this.paramsConfig);
  }

  // 获取列表数据
  private async findList(config: any) {
    console.log("🚀 ~ config", config);
    this.loading = true;
    try {
      const res: any = await getTableDataList(config.url, config.params);
      if (res.result && res.data) {
        this.personalData = res.data;
      } else {
        this.personalData = [];
      }
    } catch (error) {
      console.log("🚀 ~ error", error);
      this.personalData = [];
    }

    this.loading = false;
  }

  // 展示用户设置区域
  private showPersonalLoginDialog(item: any) {
    console.log("🚀 ~ item", item)
    this.clickPersonalData = item
  }

  // 新增员工
  @Emit()
  emitHandleInsert() {
    console.log("aaa");
  }
  private insertPersonal() {
    this.emitHandleInsert();
  }

  // 查看员工信息
  @Emit()
  emitHandleSearch(rowData: any) {
    console.log("emitHandleSearch");
    return rowData;
  }
  private searchPersonalDetail() {
    this.emitHandleSearch(this.clickPersonalData);
  }

  // 删除账户信息
  @Emit()
  emitHandleRemove(rowData: any) {
    return rowData;
  }
  private dealPersonalInfo = async () => {
    // const type = await modal.confirm('您确定要删除该数据?')
    // if (type === 'confirm') {
    this.emitHandleRemove(this.clickPersonalData);
    // }
  };

  // 查看角色
  private searchRole() {}

  // 密码重置
  private resetPassword() {}

  // 关联角色
  private associateRole() {}
}
